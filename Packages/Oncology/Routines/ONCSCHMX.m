ONCSCHMX ;Hines OIFO/RTK - AJCC ID, XX and other special code ;08/28/19
 ;;2.2;ONCOLOGY;**10,12**;Jul 31, 2013;Build 8
 ;
 Q
CHKAJID ;Special code for some Schemas-AJCC ID/Chapter values including 'XX'
 N ONCJFG,ONC3926 S ONCJFG=0
 S ONCHIST=$$HIST^ONCFUNC(D0)
 S ONCTPCD=$P(TOPCOD,".",1)_$P(TOPCOD,".",2) ;remove the "."
 S HST14=$E(ONCHIST,1,4),ONCT3=$E(ONCTPCD,2,5)
 S ONC3926=$P($G(^ONCO(165.5,D0,"SSD4")),U,21)  ; Schema Discriminator 1
 S ONC3927=$P($G(^ONCO(165.5,D0,"SSD4")),U,22)  ; Schema Discriminator 2
 D ^ONCSCHMA I ONCSCMA=0 W !!,"Unable to calculate the AJCC ID Value",! Q
 ;
 ;
 ;00060 Cervical LN & Unknown Primary 6/XX
 I ONCSCMA="00060" D  I ONCJFG=1 Q
 .I ((HST14>7999)&(HST14<8006))!((HST14>8010)&(HST14<8046))!(HST14=8050)!((HST14>8052)&(HST14<8061))!((HST14>8074)&(HST14<8082))!((HST14>8084)&(HST14<8121))!((HST14>8121)&(HST14<8132))!((HST14>8140)&(HST14<8147)) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>8147)&(HST14<8192))!((HST14>8200)&(HST14<8301))!((HST14>8310)&(HST14<8421))!((HST14>8439)&(HST14<8445))!((HST14>8450)&(HST14<8475))!((HST14>8480)&(HST14<8525)) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>8529)&(HST14<8544))!((HST14>8550)&(HST14<8562))!((HST14>8569)&(HST14<8701))!((HST14>8719)&(HST14<8791))!(HST14=9700)!(HST14=9701) S ONCAJID="XX",ONCJFG=1 Q
 ;
 ;00090 Nasopharynx 9/XX
 I ONCSCMA="00090" D  I ONCJFG=1 Q
 .I ((HST14>8000)&(HST14<8006))!((HST14>8010)&(HST14<8016))!((HST14>8020)&(HST14<8052))!((HST14>8052)&(HST14<8061))!((HST14>8073)&(HST14<8083)) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>8083)&(HST14<8132))!((HST14>8140)&(HST14<8192))!((HST14>8200)&(HST14<8701))!(HST14=9700)!(HST14=9701) S ONCAJID="XX",ONCJFG=1 Q
 ;
 ;00111 Oropharynx (p16-) 11.1/XX
 I ONCSCMA="00111" D  I ONCJFG=1 Q
 .I (ONCTPCD="C104")&((HST14=8051)!(HST14=8052)!(HST14=8070)!(HST14=8074)!(HST14=8075)!(HST14=8082)!(HST14=8083)!(HST14=8086)!(HST14=8560)) S ONCAJID="XX",ONCJFG=1 Q
 .I "C019^C024^C051^C052^C090^C091^C098^C099^C100^C102^C103^C104^C108^C109^C111"[ONCTPCD D
 ..I ((HST14>7999)&(HST14<8051))!((HST14>8052)&(HST14<8061))!((HST14>8070)&(HST14<8074))!((HST14>8075)&(HST14<8082))!((HST14>8083)&(HST14<8086))!((HST14>8089)&(HST14<8553)) S ONCAJID="XX",ONCJFG=1 Q
 ..I ((HST14>8560)&(HST14<8701))!(HST14=9700)!(HST14=9701) S ONCAJID="XX",ONCJFG=1 Q
 ;
 ;00100 Oropharynx (p16+) 10/XX
 I ONCSCMA="00100" D  I ONCJFG=1 Q
 .I (ONCTPCD="C104")&((HST14=8070)!(HST14=8072)!(HST14=8083)!(HST14=8085)) S ONCAJID="XX",ONCJFG=1 Q
 .I "C019^C024^C051^C052^C090^C091^C098^C099^C100^C102^C103^C104^C108^C109^C111"[ONCTPCD D
 ..I ($E(ONCHIST,5)=2)&((HST14=8070)!(HST14=8072)!(HST14=8083)!(HST14=8085)) S ONCAJID="XX",ONCJFG=1 Q
 ..I ((HST14>7999)&(HST14<8061))!(HST14=8071)!((HST14>8072)&(HST14<8083))!(HST14=8084)!((HST14>8085)&(HST14<8701))!(HST14=9700)!(HST14=9701) S ONCAJID="XX",ONCJFG=1 Q
 ;
 ;00112 Hypopharynx 11.2/XX
 I ONCSCMA="00112" D  I ONCJFG=1 Q
 .I ((HST14>7999)&(HST14<8051))!((HST14>8052)&(HST14<8061))!((HST14>8070)&(HST14<8074))!((HST14>8075)&(HST14<8082))!((HST14>8083)&(HST14<8086))!((HST14>8089)&(HST14<8553)) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>8560)&(HST14<8701))!(HST14=9700)!(HST14=9701) S ONCAJID="XX",ONCJFG=1 Q
 ;
 ;00140 Melanoma of Head & Neck 14/XX
 I ONCSCMA="00140" D  I ONCJFG=1 Q
 .I ((ONCT3>2)&(ONCT3<6))!((ONCT3>7)&(ONCT3<10))!((ONCT3>18)&(ONCT3<70))!((ONCT3>89)&(ONCT3<92))!((ONCT3>97)&(ONCT3<104))!((ONCT3>107)&(ONCT3<149))!(ONCT3=300)!(ONCT3=310)!(ONCT3=311)!((ONCT3>319)&(ONCT3<323))!(ONCT3=328)!(ONCT3=329) D
 ..I ($E(ONCHIST,5)=2) D  I ONCJFG=1 Q
 ...I ((HST14=8720)!(HST14=8721)!(HST14=8722)!(HST14=8730)!(HST14=8745)!(HST14=8746)!(HST14=8770)!(HST14=8771)!(HST14=8772)) S ONCAJID="XX",ONCJFG=1 Q
 .I "C104^C301^C312^C313^C318^C319^C323"[ONCTPCD D  I ONCJFG=1 Q
 ..I (HST14=8720)!(HST14=8721)!(HST14=8722)!(HST14=8730)!(HST14=8745)!(HST14=8746)!(HST14=8770)!(HST14=8771)!(HST14=8772) S ONCAJID="XX",ONCJFG=1 Q
 .I ((ONCT3>2)&(ONCT3<6))!((ONCT3>7)&(ONCT3<10))!((ONCT3>18)&(ONCT3<70))!((ONCT3>89)&(ONCT3<149))!((ONCT3>299)&(ONCT3<330)) D  I ONCJFG=1 Q
 ..I ((HST14>8722)&(HST14<8729))!((HST14>8739)&(HST14<8745))!((HST14>8749)&(HST14<8763))!((HST14>8772)&(HST14<8791)) S ONCAJID="XX",ONCJFG=1 Q
 ;
 ;00161 Esophagus (Squamous) 16.1/XX
 I (ONCSCMA="00161") D  I ONCJFG=1 Q
 .I (HST14=8020)!(HST14=8051)!(HST14=8070)!(HST14=8074)!(HST14=8077)!(HST14=8083)!(HST14=8560) S ONCAJID=16.1,ONCAJCHP=16.1,ONCJFG=1 Q
 .I (HST14=8050)!(HST14=8052)!(HST14=8053)!(HST14=8054) S ONCAJID="XX",ONCJFG=1 Q
 ;
 ;00169 Esophagus (excluding Squamous) 16.2/16.3/XX
 I (ONCSCMA="00169") D  I ONCJFG=1 Q
 .I "C150^C151^C152^C153^C154^C155^C158^C159"[ONCTPCD D
 ..I (HST14=8240)!(HST14=8249) S ONCAJID=16.3,ONCAJCHP=16.3,ONCJFG=1 Q
 ..I (HST14=8150)!(HST14=8151)!(HST14=8152)!(HST14=8153)!(HST14=8155)!(HST14=8156)!(HST14=8158)!(HST14=8241)!(HST14=8242)!(HST14=8683) S ONCAJID="XX",ONCJFG=1 Q
 .I "C150^C151^C152^C153^C154^C155^C158^C159^C160"[ONCTPCD D
 ..I (HST14=8000)!(HST14=8010)!(HST14=8013)!(HST14=8041)!(HST14=8071)!(HST14=8145)!(HST14=8246)!(HST14=8255) S ONCAJID=16.3,ONCAJCHP=16.3,ONCJFG=1 Q
 ..I ((HST14=8020)&(ONC3927=2))!(HST14=8140)!(HST14=8148)!(HST14=8200)!(HST14=8244)!(HST14=8430) S ONCAJID=16.2,ONCAJCHP=16.2,ONCJFG=1 Q
 ..I ((HST14>8000)&(HST14<8006))!((HST14>8010)&(HST14<8013))!((HST14>8013)&(HST14<8015))!((HST14>8020)&(HST14<8041))!(HST14=8060)!((HST14>8071)&(HST14<8074))!((HST14>8074)&(HST14<8077))!((HST14>8077)&(HST14<8083)) S ONCAJID="XX",ONCJFG=1 Q
 ..I ((HST14>8083)&(HST14<8132))!((HST14>8140)&(HST14<8145))!(HST14=8146)!(HST14=8147)!(HST14=8149)!(HST14=8154)!(HST14=8157)!((HST14>8159)&(HST14<8192))!((HST14>8200)&(HST14<8232))!(HST14=8243)!(HST14=8245) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>8041)&(HST14<8047))!(HST14=8247)!(HST14=8248) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>8249)&(HST14<8255))!((HST14>8255)&(HST14<8421))!((HST14>8439)&(HST14<8553))!((HST14>8560)&(HST14<8683))!((HST14>8689)&(HST14<8701))!((HST14>8719)&(HST14<8791))!(HST14=9700)!(HST14=9701) S ONCAJID="XX",ONCJFG=1 Q
 ;
 ;00180 Small Intestine 18.1/18.2/XX
 I ONCSCMA="00180" D  I ONCJFG=1 Q
 .I "C170^C171^C172^C178^C179"[ONCTPCD D
 ..I (HST14=8000)!(HST14=8013)!(HST14=8020)!(HST14=8041)!(HST14=8070)!(HST14=8148)!(HST14=8244)!(HST14=8255)!(HST14=8510)!(HST14=8560) S ONCAJID=18.2,ONCJFG=1 Q
 .I ONCTPCD="C173" D
 ..I (HST14=8000)!(HST14=8010)!(HST14=8013)!(HST14=8020)!(HST14=8041)!(HST14=8070)!(HST14=8140)!(HST14=8148)!(HST14=8210) S ONCAJID="XX",ONCJFG=1 Q
 ..I (HST14=8244)!(HST14=8255)!(HST14=8261)!(HST14=8263)!(HST14=8480)!(HST14=8481)!(HST14=8490)!(HST14=8510)!(HST14=8560) S ONCAJID="XX",ONCJFG=1 Q
 .I "C170^C171^C172^C173^C178^C179"[ONCTPCD D
 ..I ((HST14>7999)&(HST14<8006))!(HST14=8011)!(HST14=8012)!(HST14=8014)!(HST14=8015)!((HST14>8020)&(HST14<8041))!((HST14>8041)&(HST14<8061))!((HST14>8070)&(HST14<8132))!((HST14>8140)&(HST14<8148))!(HST14=8149) S ONCAJID="XX",ONCJFG=1 Q
 ..I (HST14=8154)!(HST14=8157)!((HST14>8159)&(HST14<8205))!((HST14>8210)&(HST14<8232))!(HST14=8243)!((HST14>8244)&(HST14<8249))!((HST14>8249)&(HST14<8255))!((HST14>8255)&(HST14<8261))!(HST14=8262) S ONCAJID="XX",ONCJFG=1 Q
 ..I ((HST14>8263)&(HST14<8475))!(HST14=8482)!((HST14>8499)&(HST14<8510))!((HST14>8511)&(HST14<8553))!((HST14>8560)&(HST14<8683))!((HST14>8689)&(HST14<8701))!((HST14>8719)&(HST14<8791))!(HST14=9700)!(HST14=9701) S ONCAJID="XX",ONCJFG=1 Q
 ;
 ;00220 Liver 22/XX
 I ONCSCMA="00220" D  I ONCJFG=1 Q
 .I ($E(ONCHIST,5)=2)&((HST14>8169)&(HST14<8175)) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>7999)&(HST14<8164))!((HST14>8174)&(HST14<8701))!((HST14>8719)&(HST14<8791))!(HST14=9700)!(HST14=9701) S ONCAJID="XX",ONCJFG=1 Q
 ;
 ;00230 Bile Ducts Intrahepatic 23/XX
 I ONCSCMA="00230" D  I ONCJFG=1 Q
 .I ((HST14>7999)&(HST14<8013))!((HST14>8013)&(HST14<8041))!((HST14>8041)&(HST14<8148))!((HST14>8148)&(HST14<8159))!((HST14>8161)&(HST14<8176)) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>8189)&(HST14<8246))!((HST14>8246)&(HST14<8464))!((HST14>8470)&(HST14<8503))!((HST14>8503)&(HST14<8701))!((HST14>8719)&(HST14<8791))!(HST14=9700)!(HST14=9701) S ONCAJID="XX",ONCJFG=1 Q
 ;
 ;00241/00242/00250 Gallbladder/Cystic Duct/Bile Duct Perihilar 24/25/XX
 I (ONCSCMA="00241")!(ONCSCMA="00242")!(ONCSCMA="00250") D  I ONCJFG=1 Q
 .I ((HST14>7999)&(HST14<8006))!(HST14=8011)!(HST14=8012)!(HST14=8014)!(HST14=8015)!((HST14>8020)&(HST14<8041))!((HST14>8041)&(HST14<8061)) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>8070)&(HST14<8132))!((HST14>8140)&(HST14<8144))!((HST14>8144)&(HST14<8148)) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>8148)&(HST14<8246))!((HST14>8246)&(HST14<8301))!((HST14>8310)&(HST14<8464))!((HST14>8470)&(HST14<8475))!((HST14>8503)&(HST14<8553))!(HST14=9700)!(HST14=9701) S ONCAJID="XX",ONCJFG=1 Q
 .I (HST14=8481)!(HST14=8482)!(HST14=8500)!(HST14=8501)!(HST14=8502)!((HST14>8560)&(HST14<8701))!((HST14>8719)&(HST14<8791)) S ONCAJID="XX",ONCJFG=1 Q
 ;
 ;00260 Bile Ducts Distal 26/XX
 I ONCSCMA="00260" D  I ONCJFG=1 Q
 .I ((HST14>8000)&(HST14<8006))!(HST14=8011)!(HST14=8012)!(HST14=8014)!(HST14=8015)!((HST14>8020)&(HST14<8041))!((HST14>8041)&(HST14<8061))!((HST14>8070)&(HST14<8132)) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>8140)&(HST14<8144))!((HST14>8144)&(HST14<8148))!((HST14>8148)&(HST14<8159))!(HST14=8161) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>8162)&(HST14<8244))!(HST14=8245)!((HST14>8246)&(HST14<8301))!((HST14>8310)&(HST14<8464))!((HST14>8470)&(HST14<8475))!((HST14>8503)&(HST14<8553))!(HST14=9700)!(HST14=9701) S ONCAJID="XX",ONCJFG=1 Q
 .I (HST14=8481)!(HST14=8482)!(HST14=8501)!(HST14=8502)!((HST14>8560)&(HST14<8701))!((HST14>8719)&(HST14<8791)) S ONCAJID="XX",ONCJFG=1 Q
 ;
 ;00360 Lung 36/XX
 I ONCSCMA="00360" D  I ONCJFG=1 Q
 .I ((HST14>8000)&(HST14<8006))!(HST14=8011)!((HST14>8013)&(HST14<8022))!(HST14=8030)!((HST14>8033)&(HST14<8036))!((HST14>8042)&(HST14<8045))!((HST14>8045)&(HST14<8061)) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>8072)&(HST14<8082))!((HST14>8083)&(HST14<8132))!((HST14>8140)&(HST14<8144))!((HST14>8144)&(HST14<8192)) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>8200)&(HST14<8222))!(HST14=8231)!((HST14>8240)&(HST14<8246))!(HST14=8247)!(HST14=8248)!(HST14=8251)!((HST14>8260)&(HST14<8265))!((HST14>8269)&(HST14<8333)) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>8333)&(HST14<8421))!((HST14>8439)&(HST14<8475))!((HST14>8481)&(HST14<8551))!(HST14=8552)!(HST14=8561)!((HST14>8569)&(HST14<8701))!((HST14>8719)&(HST14<8791))!(HST14=9700)!(HST14=9701) S ONCAJID="XX",ONCJFG=1 Q
 ;
 ;00430 GIST 43.1/43.2/XX
 I ((ONCT3>149)&(ONCT3<160))!((ONCT3>169)&(ONCT3<173))!((ONCT3>177)&(ONCT3<210))!(ONCT3=480)!(ONCT3=482)!(ONCT3=488) D  I ONCJFG=1 Q
 .I $E(ONCHIST,5)'=2 D
 ..I (HST14=8936)&(ONC3926="") S ONCAJID=43.2,ONCAJCHP=43.2,ONCJFG=1 Q
 I ONCTPCD="C481" D  I ONCJFG=1 Q
 .I $E(ONCHIST,5)'=2 D
 ..I (HST14=8936)&((ONC3926=1)!(ONC3926=9)) S ONCAJID=43.2,ONCAJCHP=43.2,ONCJFG=1 Q
 I ONCTPCD="C173" D  I ONCJFG=1 Q
 .I (HST14=8936)&(ONC3926="") S ONCAJID="XX",ONCJFG=1 Q
 I ONCTPCD="C481" D  I ONCJFG=1 Q
 .I (HST14=8935)&((ONC3926=1)!(ONC3926=2)!(ONC3926=9)) S ONCAJID="XX",ONCJFG=1 Q
 .I (HST14=8936)&($E(ONCHIST,5)=2)&((ONC3926=1)!(ONC3926=2)!(ONC3926=9)) S ONCAJID="XX",ONCJFG=1 Q
 I ((ONCT3>149)&(ONCT3<173))!((ONCT3>177)&(ONCT3<210))!(ONCT3=480)!(ONCT3=482)!(ONCT3=488) D  I ONCJFG=1 Q
 .I (HST14=8936)&($E(ONCHIST,5)=2)&(ONC3926="") S ONCAJID="XX",ONCJFG=1 Q
 I ((ONCT3>149)&(ONCT3<210))!(ONCT3=480)!(ONCT3=481)!(ONCT3=482)!(ONCT3=488) D  I ONCJFG=1 Q
 .I (HST14=8935)&(ONC3926="") S ONCAJID="XX",ONCJFG=1 Q
 I (ONCT3="000")!((ONCT3>0)&(ONCT3<149))!((ONCT3>209)&(ONCT3<480))!((ONCT3>489)&(ONCT3<540))!((ONCT3>570)&(ONCT3<700))!((ONCT3>738)&(ONCT3<751))!((ONCT3>753)&(ONCT3<810)) D  I ONCJFG=1 Q
 .I ((HST14=8935)!(HST14=8936))&(ONC3926="") S ONCAJID="XX",ONCJFG=1 Q
 I ((ONCT3>699)&(ONCT3<730))!((ONCT3>750)&(ONCT3<754)) D  I ONCJFG=1 Q
 .I ((HST14=8935)!(HST14=8936))&($E(ONCHIST,5)=3)&(ONC3926="") S ONCAJID="XX",ONCJFG=1 Q
 ;
 ;00470 Melanoma of the Skin 47/XX
 I ONCSCMA="00470" D  I ONCJFG=1 Q
 .I (HST14=8722)!((HST14>8724)&(HST14<8729))!(HST14=8740)!(HST14=8741)!((HST14>8745)&(HST14<8761))!(HST14=8762)!(HST14=8773)!(HST14=8774)!(HST14=8790) S ONCAJID="XX",ONCJFG=1 Q
 ;
 ;00480 Breast 48.1/48.2/XX
 I "C500^C501^C502^C503^C504^C505^C506^C508^C509"[ONCTPCD D  I ONCJFG=1 Q
 .I $E(ONCHIST,5)=2 D
 ..I (HST14=8000)!(HST14=8010)!(HST14=8022)!(HST14=8032)!(HST14=8035)!(HST14=8041)!(HST14=8070)!(HST14=8140)!(HST14=8200)!(HST14=8211)!(HST14=8246)!(HST14=8255)!(HST14=8290)!(HST14=8314)!(HST14=8315)!(HST14=8401) S ONCAJID="XX",ONCJFG=1 Q
 ..I (HST14=8410)!(HST14=8430)!(HST14=8480)!(HST14=8502)!(HST14=8509)!(HST14=8510)!(HST14=8513)!((HST14>8519)&(HST14<8526))!(HST14=8530)!(HST14=8540)!(HST14=8541)!(HST14=8550)!((HST14>8569)&(HST14<8573))!(HST14=8574) S ONCAJID="XX",ONCJFG=1 Q
 ..I (HST14=8575)!(HST14=8982)!(HST14=8983) S ONCAJID="XX",ONCJFG=1 Q
 I "C500^C501^C502^C503^C504^C505^C506^C508^C509"[ONCTPCD D  I ONCJFG=1 Q
 .I $E(ONCHIST,5)=2 D
 ..I (HST14=8201)!(HST14=8500)!(HST14=8501)!(HST14=8503)!(HST14=8504)!(HST14=8507)!(HST14=8543) S ONCAJID=48.1,ONCJFG=1
 I "C501^C502^C503^C504^C505^C506^C508^C509"[ONCTPCD D  I ONCJFG=1 Q
 .I ((HST14>8719)&(HST14<8791)) S ONCAJID="XX",ONCJFG=1
 ;
 ;00580 Prostate 58/XX
 I ONCSCMA="00580" D  I ONCJFG=1 Q
 .I ($E(ONCHIST,5)=2)&((HST14=8000)!(HST14=8010)!(HST14=8013)!(HST14=8041)!(HST14=8070)!(HST14=8120)!(HST14=8140)!(HST14=8147)!(HST14=8148)!(HST14=8201)!(HST14=8230)!(HST14=8240)) S ONCAJID="XX",ONCJFG=1 Q
 .I ($E(ONCHIST,5)=2)&((HST14=8260)!(HST14=8480)!(HST14=8490)!(HST14=8500)!(HST14=8560)!(HST14=8572)!(HST14=8574)) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>8010)&(HST14<8013))!((HST14>8013)&(HST14<8041))!((HST14>8041)&(HST14<8061))!((HST14>8070)&(HST14<8111))!((HST14>8120)&(HST14<8132))!((HST14>8140)&(HST14<8147))!((HST14>8148)&(HST14<8201)) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>8201)&(HST14<8222))!(HST14=8231)!((HST14>8240)&(HST14<8258))!((HST14>8260)&(HST14<8475))!(HST14=8481)!(HST14=8482)!((HST14>8500)&(HST14<8553))!((HST14>8560)&(HST14<8572))!(HST14=8573) S ONCAJID="XX",ONCJFG=1 Q
 .I ((HST14>8574)&(HST14<8701))!((HST14>8000)&(HST14<8006))!((HST14>8719)&(HST14<8791))!(HST14=9700)!(HST14=9701) S ONCAJID="XX",ONCJFG=1 Q
 ;
 D ^ONCSCHMY  ;continued in ONCSCHMY
 Q
