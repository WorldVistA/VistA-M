SDESGETALLCANCOM ;ALB/BLB - SDES GET ALL CANCEL COMMENTS ;NOV 22, 2022
 ;;5.3;Scheduling;**837**;Aug 13, 1993;Build 4
 ;;Per VHA Directive 6402, this routine should not be modified
 ;
 Q
 ;
GETCOMMENTS(JSONRETURN) ;
 N RETURN,COMMENTS
 ;
 D BUILD(.COMMENTS)
 M RETURN=COMMENTS D BUILDJSON(.JSONRETURN,.RETURN)
 Q
 ;
BUILD(COMMENTS) ;
 N COUNT,COMMENTIEN
 ;
 S COMMENTIEN=0,COUNT=0
 F  S COMMENTIEN=$O(^SDEC(409.88,COMMENTIEN)) Q:'COMMENTIEN  D
 .S COUNT=COUNT+1
 .S COMMENTS("CancelComments",COUNT,"HashTag")=$$GET1^DIQ(409.88,COMMENTIEN,.01,"E")
 .S COMMENTS("CancelComments",COUNT,"Comment")=$$GET1^DIQ(409.88,COMMENTIEN,1,"E")
 .S COMMENTS("CancelComments",COUNT,"NationalFlag")=$$GET1^DIQ(409.88,COMMENTIEN,2,"I")
 Q
 ;
BUILDJSON(JSONRETURN,RETURN) ;
 D ENCODE^XLFJSON("RETURN","JSONRETURN")
 Q
 ;
