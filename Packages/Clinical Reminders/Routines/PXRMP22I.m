PXRMP22I ;PBM/RMS,AGP - PRE AND POST INSTALL FOR TERATOGENIC MEDS ORDER CHECK 6/03/12
 ;;2.0;CLINICAL REMINDERS;**22**;Feb 04, 2005;Build 160
 ;Reference to ^PSSCLINR supported by IA #5187
 ;Reference to ^ORD(101.43 supported by IA #2843
 Q
 ;
DELDD ;Delete the old data dictionaries.
 N DIU,TEXT
 D EN^DDIOL("Removing old data dictionaries.")
 S DIU(0)=""
 F DIU=801,801.1 D
 .S TEXT=" Deleting data dictionary for file # "_DIU
 .D EN^DDIOL(TEXT)
 .D EN^DIU2
 Q
 ;
PRE ;
 I '$$PATCH^XPDUTL("PXRM*2.0*22") D
 .D REMDATA
 .K ^PXD(801,"AOIR")
 .D DELDD
 .D RENAME
 D DELEXE^PXRMEXSI("EXARRAY","PXRMP22E")
 Q
 ;
POST ;
 D SMEXINS^PXRMEXSI("EXARRAY","PXRMP22E")
 Q
 ;
REMDATA ;
 N ARRAY,DA,DIK,IEN,PXRMDALL,TEXT
 S PXRMDALL=1
 S IEN=0 F  S IEN=$O(^PXD(801,IEN)) Q:IEN'>0  D
 .S ARRAY(IEN)=""
 I '$D(ARRAY) Q
 S TEXT(1)="Removing old order check group entries."
 D MES^XPDUTL(.TEXT)
 S DIK="^PXD(801,",DA=0
 F  S DA=$O(ARRAY(DA)) Q:DA'>0  D ^DIK
 ;delete rules
 S IEN=0 F  S IEN=$O(^PXD(801.1,IEN)) Q:IEN'>0  D
 .S ARRAY(IEN)=""
 I '$D(ARRAY) Q
 S TEXT(1)="Removing old order check rule entries."
 D MES^XPDUTL(.TEXT)
 S DIK="^PXD(801.1,",DA=0
 F  S DA=$O(ARRAY(DA)) Q:DA'>0  D ^DIK
 Q
 ;
RENAME ;
 N PXRMINST
 S PXRMINST=1
 ;rename old print template
 D RENAME^PXRMUTIL(.4,"PXRM ORDERABLE ITEM GROUP LIST","PXRM ORDER CHECK ITEMS GROUP")
 ;rename old options for new name
 D RENAME^PXRMUTIL(19,"PXRM ORDERABLE ITEM GROUP EDIT","PXRM ORDER CHK ITEMS GROUP EDT")
 D RENAME^PXRMUTIL(19,"PXRM ORDERABLE ITEM GROUP INQ","PXRM ORDER CHK ITEMS GROUP INQ")
 D RENAME^PXRMUTIL(19,"PXRM ORDERABLE ITEM GROUP MENU","PXRM ORDER CHECK MENU")
 D RENAME^PXRMUTIL(19,"PXRM ORDERABLE ITEM TESTER","PXRM ORDER CHECK TESTER")
 ; rename for pre-existing definition and findings
 D RENAME^PXRMUTIL(811.2,"VHA-TERATOGENIC MEDICATIONS ORDER CHECK EXCL (TAXONOMIES)","VA-TERATOGENIC MEDICATIONS ORDER CHECK EXCL (TAXONOMIES)")
 D RENAME^PXRMUTIL(811.2,"VHA-WH IUD INSERTION (TAXONOMY)","VA-WH IUD INSERTION (TAXONOMY)")
 D RENAME^PXRMUTIL(811.2,"VHA-WH IUD REMOVAL (TAXONOMY)","VA-WH IUD REMOVAL (TAXONOMY)")
 D RENAME^PXRMUTIL(811.5,"VHA-FDA CATEGORY X MEDICATIONS","VA-FDA CATEGORY X MEDICATIONS")
 D RENAME^PXRMUTIL(811.5,"VHA-FDA CATEGORY D MEDICATIONS","VA-FDA CATEGORY D MEDICATIONS")
 D RENAME^PXRMUTIL(811.5,"VHA-FDA CATEGORY C AND FDB CATEGORY 1 MEDICATIONS","VA-FDA CATEGORY C AND FDB CATEGORY 1 MEDICATIONS")
 D RENAME^PXRMUTIL(811.5,"VHA-WH IUD INSERTION (TERM)","VA-WH IUD INSERTION (TERM)")
 D RENAME^PXRMUTIL(811.5,"VHA-WH IUD REMOVAL (TERM)","VA-WH IUD REMOVAL (TERM)")
 D RENAME^PXRMUTIL(811.5,"VHA-TERATOGENIC MEDICATIONS ORDER CHECK EXCLUSIONS (TERM)","VA-TERATOGENIC MEDICATIONS ORDER CHECK EXCLUSIONS (TERM)")
 D RENAME^PXRMUTIL(811.9,"VHA-TERATOGENIC MEDICATIONS ORDER CHECK","VA-TERATOGENIC MEDICATIONS ORDER CHECK")
 ;rename synonym in the option file
 N RESULT
 S RESULT=$$ADD^XPDMENU("PXRM MANAGERS MENU","PXRM ORDER CHECK MENU","ROC")
 Q
 ;
