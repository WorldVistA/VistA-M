KBAIQLDM ; GPL - QRDA loader entry routines ; 3/8/15 6:03pm
 ;;0.1;QRDA LOADER;nopatch;noreleasedate;Build 1
 ;
 Q
 ;
INITMAPS ; initialize maps 
 N G
 S G=$NA(^XTMP("KBAIQLD","MAPS"))
 K @G
 N MAP
 ; SOP (payment?)
 S MAP="SOP"
 S @G@(MAP,"CODE","394","OTHER")=""
 ; race
 S MAP="race"
 S @G@(MAP,"CODE","1002-5","AMERICAN INDIAN OR ALASKA NATI")=""
 S @G@(MAP,"CODE","2028-9","ASIAN")=""
 S @G@(MAP,"CODE","2054-5","BLACK OR AFRICAN AMERICAN")=""
 S @G@(MAP,"CODE","2076-8","NATIVE HAWAIIAN OR OTHER PACIFIC ISLANDER")=""
 S @G@(MAP,"CODE","2106-3","WHITE")=""
 S @G@(MAP,"CODE","213101","DECLINED TO SPECIFY")=""
 S @G@(MAP,"CODE","9999-4","UNKNOWN BY PATIENT")=""
 ; ethnicity
 S MAP="ethnicity"
 S @G@(MAP,"CODE","21350-2","HISPANIC OR LATINO")=""
 S @G@(MAP,"CODE","2186-5","NOT HISPANIC OR LATINO")=""
 S @G@(MAP,"CODE","213101","DECLINED TO ANSWER")=""
 ; Health Factors - SNOMED
 S MAP="HF"
 S @G@(MAP,"CODE","4525004","ED [ARRIVAL-DEPARTURE] TIME")=""
 S @G@(MAP,"CODE","1748006","VTE COMFIRMED")=""
 S @G@(MAP,"CODE","10378005","TIME DECISION TO ADMIT MADE")=""
 S @G@(MAP,"CODE","225337009","SUICIDE RISK ASSESSMENT")=""
 S @G@(MAP,"CODE","428191000124101","DOCUMENTATION OF CURRENT MEDS")=""
 S @G@(MAP,"CODE","371530004","CLINICAL CONSULTATION REPORT")=""
 S @G@(MAP,"CODE","428171000124102","ADOLESCENT DEPRESSION SCREEN NEGATIVE")=""
 S @G@(MAP,"CODE","428231000124106","MATERNAL POSTPARTUM DEPRESSION CARE")=""
 S @G@(MAP,"CODE","428341000124108","MACULAR EDEMA ABSENT")=""
 S @G@(MAP,"CODE","193350004","MACULAR EDEMA PRESENT")=""
 S @G@(MAP,"CODE","417886001","TREATMENT ADJUSTED PER PROTOCOL")=""
 S @G@(MAP,"CODE","105480006","WRITTEN INFORMATION NOT GIVEN")=""
 S @G@(MAP,"CODE","413318004","WRITTEN INFORMATION GIVEN")=""
 S @G@(MAP,"CODE","226789007","BREAST MILK ADMINISTERED")=""
 S @G@(MAP,"CODE","105480006","PATIENT REFUSED TREATMENT")=""
 S @G@(MAP,"CODE","428171000124102","ADULT DEPRESSION SCREEN")=""
 S @G@(MAP,"CODE","183932001","PROCEDURE CONTRAINDICATED")=""
 ; Health Factors - LOINC
 S @G@(MAP,"CODE","38208-5","STANDARD PAIN ASSMNT TOOL")=""
 S @G@(MAP,"CODE","44249-1","PHQ-9 RESULT")=""
 S @G@(MAP,"CODE","71955-9","PROMIS-29: ")=""
 S @G@(MAP,"CODE","71938-5","MLHFQ")=""
 S @G@(MAP,"CODE","71955-9","PROMIS-29")=""
 S @G@(MAP,"CODE","58151-2","BIMS SCORE")=""
 S @G@(MAP,"CODE","73830-2","FALL RISK ASSESSMENT")=""
 S @G@(MAP,"CODE","73831-0","ADOLESCENT DEPRESSION SCREEN")=""
 S @G@(MAP,"CODE","73832-8","ADULT DEPRESSION SCREEN")=""
 S @G@(MAP,"CODE","69981-9","ASTHMA ACTION PLAN")=""
 ; Encounters - SNOMED
 S MAP="encounters"
 ;S @G@(MAP,"CODE","183452005","IP")=""
 S @G@(MAP,"CODE","185349003","OP")=""
 ;S @G@(MAP,"CODE","4525004","ER")=""
 ;S @G@(MAP,"CODE","10197000","PS")=""
 ;S @G@(MAP,"CODE","10378005","IP")=""
 S @G@(MAP,"CODE","108313002","OP")=""
 ;S @G@(MAP,"CODE","171047005","IO")=""
 ;S @G@(MAP,"CODE","32485007","IP")=""
 ;S @G@(MAP,"CODE","305351004","ICU")=""
 ;S @G@(MAP,"CODE","112689000","IP")=""
 ;S @G@(MAP,"CODE","8715000","IP")=""
 ; Encounters - CPT
 S @G@(MAP,"CODE","92002","OP")=""
 ;S @G@(MAP,"CODE","96150","PS")=""
 S @G@(MAP,"CODE","99201","OP")=""
 ;S @G@(MAP,"CODE","99285","ER")=""
 ;S @G@(MAP,"CODE","90791","PS")=""
 S @G@(MAP,"CODE","99202","OP")=""
 ;S @G@(MAP,"CODE","99285","ER")=""
 S @G@(MAP,"CODE","99381","OP")=""
 ; location
 S MAP="location"
 ;S @G@(MAP,"CODE","OP","CLINIC A")=""
 S @G@(MAP,"CODE","OP","VISTA HEALTH CARE")=""
 S @G@(MAP,"CODE","ER","EMERGENCY DEPT")=""
 S @G@(MAP,"CODE","IP","CERT MED SURG")=""
 S @G@(MAP,"CODE","ICU","CERT ICU")=""
 S @G@(MAP,"CODE","PS","CLINIC A")=""
 ; roombed
 S MAP="roombed"
 S @G@(MAP,"CODE","IP","M1-A")=""
 S @G@(MAP,"CODE","ICU","1-A")=""
 S @G@(MAP,"CODE","PS","CLINIC PSYCHIATRY")=""
 ; provider
 S MAP="provider"
 ;S @G@(MAP,"CODE","OP","CQM,HISTORICAL MD")=""
 S @G@(MAP,"CODE","OP","USER,THREE")=""
 S @G@(MAP,"CODE","ER","CQM,HISTORICAL MD")=""
 S @G@(MAP,"CODE","IP","CQM,HISTORICAL MD")=""
 S @G@(MAP,"CODE","ICU","CQM,HISTORICAL MD")=""
 S @G@(MAP,"CODE","PS","CQM,HISTORICAL MD")=""
 ; admitting regulation
 S MAP="regs"
 S @G@(MAP,"CODE","IP","OBSERVATION (AND) EXAMINATION")=""
 S @G@(MAP,"CODE","ICU","OBSERVATION (AND) EXAMINATION")=""
 ; facility treating speciality
 S MAP="facilityTreatingSpeciality"
 S @G@(MAP,"CODE","IP","MEDICAL OBSERVATION")=""
 S @G@(MAP,"CODE","ICU","MEDICAL OBSERVATION")=""
 ; discharge type
 S MAP="dischargeType"
 S @G@(MAP,"CODE","10161009","DISCHARGE TO HOME OR POLICE CU")=""
 ; vitals
 S MAP="vitals"
 S @G@(MAP,"CODE","8462-4","BLOOD PRESSURE")=""
 S @G@(MAP,"CODE","8480-6","BLOOD PRESSURE")=""
 S @G@(MAP,"CODE","39156-5","BMI")=""
 S @G@(MAP,"CODE","59408-5","PULSE OXIMETRY")=""
 S @G@(MAP,"CODE","59408-5","OXYGEN SATURATION")=""
 ; VPatientEd
 S MAP="vPatientEd"
 S @G@(MAP,"CODE","11816003","DIET EDUCATION")=""
 S @G@(MAP,"CODE","171047005","DRUGS OF ADDICTION EDUCATION")=""
 ; consults
 S MAP="consults"
 S @G@(MAP,"CODE","103697008","DENTAL")=""
 S @G@(MAP,"CODE","171047005","PHYSICAL REHAB")=""
 ; rad orders - LOINC
 S MAP="rad"
 S @G@(MAP,"CODE","24533-2","ABDOMINAL VESSELS MRI ANGIOGRAM W/CON  IV")=""
 S @G@(MAP,"CODE","24604-1","BREAST MAMMOGRAM DIAGNOSTIC LIMITED")=""
 S @G@(MAP,"CODE","25031-6","BONE SCAN")=""
 S @G@(MAP,"CODE","24665-2","SACRUM AND COCCYX X-RAY")=""
 ; rad orders - SNOMED
 S @G@(MAP,"CODE","113094008","DIAGNOSTIC RADIOGRAPHY OF CHEST, LATERAL")=""
 S @G@(MAP,"CODE","168731009","CHEST XRAY")=""
 S @G@(MAP,"CODE","1748006","VTE Confirmed.")=""
 ; immunizations - CVX
 S MAP="immunizations"
 S @G@(MAP,"CODE","3","MEASLES,MUMPS,RUBELLA (MMR)")=""
 S @G@(MAP,"CODE","8","HEPATITIS B")=""
 S @G@(MAP,"CODE","10","POLIOMYELITIS")=""
 S @G@(MAP,"CODE","20","DIP-TET-a/PERT")=""
 S @G@(MAP,"CODE","21","VARICELLA")=""
 S @G@(MAP,"CODE","33","PNEUMOCOCCAL CONJUGATE PCV23")=""
 S @G@(MAP,"CODE","48","HIB,PRP-T")=""
 S @G@(MAP,"CODE","83","HEPA,PED/ADOL-2")=""
 S @G@(MAP,"CODE","104","HEPA/HEPB ADULT")=""
 S @G@(MAP,"CODE","111","FLU,NASAL")=""
 S @G@(MAP,"CODE","116","ROTOVIRUS,ORAL")=""
 S @G@(MAP,"CODE","140","INFLUENZA")=""
 ; immunizations - SNOMED
 S @G@(MAP,"CODE","442333005","INFLUENZA")=""
 ; VExam LOINC
 S MAP="vExam"
 S @G@(MAP,"CODE","24604-1","MAMMOGRAM")=""
 S @G@(MAP,"CODE","32451-7","MACULAR EXAM")=""
 S @G@(MAP,"CODE","44249-1","PHQ-9 RESULT")=""
 S @G@(MAP,"CODE","54108-6","NEONATAL HEARING EXAM")=""
 S @G@(MAP,"CODE","54109-4","NEONATAL HEARING EXAM")=""
 S @G@(MAP,"CODE","57254-5","FALL RISK ASSESSMENT")=""
 S @G@(MAP,"CODE","58151-2","BIMS SCORE")=""
 S @G@(MAP,"CODE","65853-4","CARDIOVASCULAR RISK")=""
 S @G@(MAP,"CODE","71484-0","CUP TO DISK RATIO EXAM")=""
 S @G@(MAP,"CODE","71486-5","OPTIC DISK EXAM")=""
 S @G@(MAP,"CODE","71938-5","MLHFQ")=""
 S @G@(MAP,"CODE","71955-9","PROMIS-29:")=""
 S @G@(MAP,"CODE","73831-0","ADOLESCENT DEPRESSION SCREEN NEGATIVE")=""
 ; VExam - SNOMED
 S @G@(MAP,"CODE","225337009","SUICIDE RISK ASSESSMENT")=""
 S @G@(MAP,"CODE","91161007","PULSE FOOT EXAM")=""
 S @G@(MAP,"CODE","134388005","DIABETIC FOOT EXAM")=""
 S @G@(MAP,"CODE","252779009","DILATED EYE EXAM")=""
 S @G@(MAP,"CODE","401191002","DIABETIC FOOT CHECK")=""
 S @G@(MAP,"CODE","419775003","VISION EXAM")=""
 S @G@(MAP,"CODE","412726003","LENGTH OF GESTATION AT BIRTH")=""
 S @G@(MAP,"CODE","44413500","ESTIMATED FETAL GESTATIONAL AGE")=""
 S @G@(MAP,"CODE","417491009","NEONATAL HEARING EXAM")=""
 ; VCPT - CPT
 S MAP="vCPT"
 S @G@(MAP,"CODE","99201","OP")=""
 S @G@(MAP,"CODE","90791","PS")=""
 S @G@(MAP,"CODE","99202","OP")=""
 S @G@(MAP,"CODE","99381","OP")=""
 ; astro gpl
 S @G@(MAP,"CODE","99499","NPP VISIT")=""
 ; VCPT - SNOMED
 S @G@(MAP,"CODE","10492003","55810")=""
 S @G@(MAP,"CODE","84755001","77427")=""
 S @G@(MAP,"CODE","234723000","D1206")=""
 S @G@(MAP,"CODE","10745001","59400")=""
 S @G@(MAP,"CODE","10178000","66840")=""
 S @G@(MAP,"CODE","105355005","99408")=""
 S @G@(MAP,"CODE","12350003","44388")=""
 S @G@(MAP,"CODE","15163009","27130")=""
 S @G@(MAP,"CODE","177184002","59409")=""
 S @G@(MAP,"CODE","179344006","27447")=""
 S @G@(MAP,"CODE","13767004","65235")=""
 S @G@(MAP,"CODE","108241001","90937")=""
 S @G@(MAP,"CODE","185349003","99202")=""
 S @G@(MAP,"CODE","442333005","90653")=""
 S @G@(MAP,"CODE","444783004","45378")=""
 S @G@(MAP,"CODE","4525004","99285")=""
 S @G@(MAP,"CODE","185349003","99381")=""
 ; labs
 S MAP="labs"
 S @G@(MAP,"CODE","2085-9","HDL CHOLESTEROL")=""
 S @G@(MAP,"CODE","34714-6","PT/INR")=""
 S @G@(MAP,"CODE","2093-3","CHOLESTEROL, TOTAL")=""
 S @G@(MAP,"CODE","12773-8","LDL CHOLESTEROL")=""
 S @G@(MAP,"CODE","13457-7","LDL CHOLESTEROL")=""
 S @G@(MAP,"CODE","13056-7","PLATELET COUNT")=""
 S @G@(MAP,"CODE","10524-7","PAP TEST")=""
 S @G@(MAP,"CODE","17856-6","HEMOGLOBIN A1C")=""
 S @G@(MAP,"CODE","17855-8","HEMOGLOBIN A1C")=""
 S @G@(MAP,"CODE","10508-0","PSA")=""
 S @G@(MAP,"CODE","10351-5","HIV 1 RNA")=""
 S @G@(MAP,"CODE","35266-6","GLEASON SCORE")=""
 S @G@(MAP,"CODE","24467-3","CD4 COUNT")=""
 S @G@(MAP,"CODE","20447-9","HIV 1 RNA")=""
 S @G@(MAP,"CODE","19080-1","PREGNANCY TEST")=""
 S @G@(MAP,"CODE","10674-0","HEPATITIS B SURFACE ANTIGEN")=""
 S @G@(MAP,"CODE","2093-3","CHOLESTEROL, TOTAL")=""
 S @G@(MAP,"CODE","12951-0","TRIGLYCERIDES")=""
 S @G@(MAP,"CODE","11268-0","STREPTOZYME")=""
 S @G@(MAP,"CODE","13217-5","CHLAMYDIA CULTURE")=""
 S @G@(MAP,"CODE","14463-4","CHLAMYDIA CULTURE")=""
 ; astro gpl
 S @G@(MAP,"CODE","30313-1","HGB")=""
 S @G@(MAP,"CODE","30313-1","HB (HGB)")=""
 S @G@(MAP,"CODE","33765-9","WBC")=""
 S @G@(MAP,"CODE","26515-7","PLT")=""
 S @G@(MAP,"CODE","26515-7","PLT ")=""
 S @G@(MAP,"CODE","50544-6","EVEROLIMUS BLOOD")=""
 S @G@(MAP,"CODE","50544-6","EVEROLIMUS BLOOD LEVEL")=""
 S @G@(MAP,"CODE","5778-6","URINE COLOR")=""
 S @G@(MAP,"CODE","5767-9","APPEARANCE OF URINE")=""
 S @G@(MAP,"CODE","5811-5","URINE DENSITY")=""
 S @G@(MAP,"CODE","24357-6","URINALALYSIS MACRO (DIPSTICK) PANEL")=""
 S @G@(MAP,"CODE","58410-2","CBC")=""
 S @G@(MAP,"CODE","5803-2","URINE PH")=""
 S @G@(MAP,"CODE","5792-7","URINE GLUCOSE")=""
 S @G@(MAP,"CODE","5792-7","GLUCOSE1")=""
 S @G@(MAP,"CODE","5797-6","URINE KEYTONES")=""
 S @G@(MAP,"CODE","5797-6","URINE KETONES")=""
 S @G@(MAP,"CODE","5797-6","KETONES")=""
 S @G@(MAP,"CODE","5804-0","URINE PROTEIN")=""
 S @G@(MAP,"CODE","5804-0","PROTEIN")=""
 ; lab units
 S MAP="units"
 S @G@(MAP,"CODE","5804-0","mg/dL")="" ; PROTEIN
 S @G@(MAP,"CODE","5792-7","mb/dL")="" ; URINE GLOCOSE
 S @G@(MAP,"CODE","5811-5","1")="" ; URINE DENSITY
 S @G@(MAP,"CODE","5803-2","[pH]")="" ; URINE PH
 S @G@(MAP,"CODE","30313-1","g/dL")="" ; HGB
 S @G@(MAP,"CODE","33765-9","10*3/uL")="" ; WBC
 S @G@(MAP,"CODE","26515-7","10*3/uL")="" ; PLATELETS
 S @G@(MAP,"CODE","50544-6","ng/mL")="" ;EVEROLIMUS BLOOD LEVEL
 ; reference range low
 S MAP="rangeLow"
 S @G@(MAP,"CODE","5804-0","0.0")="" ; PROTEIN
 S @G@(MAP,"CODE","5792-7","0.0")="" ; URINE GLOCOSE
 S @G@(MAP,"CODE","5811-5","1.005")="" ; URINE DENSITY
 S @G@(MAP,"CODE","5803-2","4.5")="" ; URINE PH
 S @G@(MAP,"CODE","30313-1","13.5")="" ; HGB
 S @G@(MAP,"CODE","33765-9","4.5")="" ; WBC
 S @G@(MAP,"CODE","5797-6","0.6")="" ; URINE KETONES
 S @G@(MAP,"CODE","26515-7","150")="" ; PLATELETS
 S @G@(MAP,"CODE","50544-6","2.0")="" ;EVEROLIMUS BLOOD LEVEL
 ; reference range high
 S MAP="rangeHigh"
 S @G@(MAP,"CODE","5804-0","20.0")="" ; PROTEIN
 S @G@(MAP,"CODE","5792-7","0.8")="" ; URINE GLOCOSE
 S @G@(MAP,"CODE","5811-5","1.030")="" ; URINE DENSITY
 S @G@(MAP,"CODE","5803-2","8.0")="" ; URINE PH
 S @G@(MAP,"CODE","30313-1","17.5")="" ; HGB
 S @G@(MAP,"CODE","33765-9","11")="" ; WBC
 S @G@(MAP,"CODE","5797-6","1.5")="" ; URINE KETONES
 S @G@(MAP,"CODE","26515-7","400")="" ; PLATELETS
 S @G@(MAP,"CODE","50544-6","8.0")="" ;EVEROLIMUS BLOOD LEVEL
 ; 
 ; rxnorm to vuid
 S MAP="rxnorm"
 S @G@(MAP,"CODE",1000097,4002480)=""
 S @G@(MAP,"CODE",313585,4012182)=""
 S @G@(MAP,"CODE",314153,4013783)=""
 S @G@(MAP,"CODE",692876,4025906)=""
 S @G@(MAP,"CODE",577154,4025018)=""
 S @G@(MAP,"CODE",860215,4003764)=""
 S @G@(MAP,"CODE",860221,4003765)=""
 S @G@(MAP,"CODE",151226,4024528)=""
 S @G@(MAP,"CODE",198029,4010104)=""
 S @G@(MAP,"CODE",198030,4010106)=""
 S @G@(MAP,"CODE",198031,4010105)=""
 S @G@(MAP,"CODE",198045,4001216)=""
 S @G@(MAP,"CODE",198046,4001218)=""
 S @G@(MAP,"CODE",198047,4001215)=""
 S @G@(MAP,"CODE",199888,4013030)=""
 S @G@(MAP,"CODE",199889,4013031)=""
 S @G@(MAP,"CODE",199890,4013032)=""
 S @G@(MAP,"CODE",205315,4013343)=""
 S @G@(MAP,"CODE",205316,4013342)=""
 S @G@(MAP,"CODE",250983,4013568)=""
 S @G@(MAP,"CODE",311975,4005637)=""
 S @G@(MAP,"CODE",312036,4001214)=""
 S @G@(MAP,"CODE",314119,4005636)=""
 S @G@(MAP,"CODE",317136,4001217)=""
 S @G@(MAP,"CODE",359817,4016739)=""
 S @G@(MAP,"CODE",359818,4016738)=""
 S @G@(MAP,"CODE",636671,4025534)=""
 S @G@(MAP,"CODE",636676,4025535)=""
 S @G@(MAP,"CODE",749289,4025532)=""
 S @G@(MAP,"CODE",749788,4025533)=""
 S @G@(MAP,"CODE",896100,4010112)=""
 S @G@(MAP,"CODE",966531,4017048)=""
 S @G@(MAP,"CODE",993503,4016940)=""
 S @G@(MAP,"CODE",993518,4017073)=""
 S @G@(MAP,"CODE",993536,4024749)=""
 S @G@(MAP,"CODE",993541,4026567)=""
 S @G@(MAP,"CODE",993550,4029871)=""
 S @G@(MAP,"CODE",993557,4026568)=""
 S @G@(MAP,"CODE",993567,4029870)=""
 S @G@(MAP,"CODE",993681,4029872)=""
 S @G@(MAP,"CODE",998671,4002473)=""
 S @G@(MAP,"CODE",998675,4002474)=""
 S @G@(MAP,"CODE",998679,4002475)=""
 ; prefered rxnorm for astro
 S MAP="preferedRxnorm"
 S @G@(MAP,"CODE",70618,7980)="" ; pennicilin g
 S @G@(MAP,"CODE",204871,309090)="" ; ceftriaxone 1 gram Solution for Injection
 S @G@(MAP,"CODE",198440,209459)="" ; Acetaminophen 500 MG Oral Tablet [Tylenol]
 N ZI
 S ZI=""
 F  S ZI=$O(@G@(ZI)) Q:ZI=""  D  ;
 . N ZJ S ZJ=""
 . F  S ZJ=$O(@G@(ZI,"CODE",ZJ)) Q:ZJ=""  D  ;
 . . N ZK S ZK=""
 . . F  S ZK=$O(@G@(ZI,"CODE",ZJ,ZK)) Q:ZK=""  D  ;
 . . . N VAL
 . . . S VAL=ZK
 . . . S @G@(ZI,"VALUE",VAL,ZJ)=""
 . . . S @G@("CODE",ZJ,VAL,ZI)=""
 . . . S @G@("VALUE",VAL,ZJ,ZI)=""
 Q
 ;
MAP(CDE,MAP) ; extrinsic returns the Value for the Code in map MAP, which is optional
 N RTN
 Q:CDE="" ""
 N GN S GN=$NA(^XTMP("KBAIQLD","MAPS"))
 I '$D(@GN) D INITMAPS
 I '$D(MAP) D  Q RTN
 . S RTN=$O(@GN@("CODE",CDE,""))
 I '$D(@GN@(MAP)) S RTN="" Q  ;
 S RTN=$O(@GN@(MAP,"CODE",CDE,""))
 I $O(@GN@(MAP,"CODE",CDE,RTN))'="" S RTN=-1 ; more than one match
 Q RTN
 ;
UNMAP(VAL,MAP) ; extrinsic returns the Value for the Code in map MAP, which is optional
 N RTN
 N GN S GN=$NA(^XTMP("KBAIQLD","MAPS"))
 I '$D(MAP) D  Q RTN
 . S RTN=$O(@GN@("VALUE",VAL,""))
 I '$D(@GN@(MAP)) S RTN="" Q  ;
 S RTN=$O(@GN@(MAP,"VALUE",VAL,""))
 I $O(@GN@(MAP,"VALUE",VAL,RTN))'="" S RTN=-1 ; more than one match
 Q RTN
 ;
GETMAP(RTN,MAP) ; returns an array of the MAP. if MAP is not specified, it returns an
 ; array of the names of all the maps
 N GN S GN=$NA(^XTMP("KBAIQLD","MAPS"))
 I '$D(MAP) D  Q  ;
 . N ZI S ZI=""
 . F  S ZI=$O(@GN@(ZI)) Q:ZI=""  D  ;
 . . Q:ZI="CODE"
 . . Q:ZI="VALUE"
 . . S @RTN@(ZI)=""
 I $D(@GN@(MAP)) M @RTN=@GN@(MAP)
 Q
 ;
