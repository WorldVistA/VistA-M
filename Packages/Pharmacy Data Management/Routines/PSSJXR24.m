PSSJXR24 ; COMPILED XREF FOR FILE #55.06 ; 09/12/12
 ; 
 S DA=0
A1 ;
 I $D(DISET) K DIKLM S:DIKM1=1 DIKLM=1 G @DIKM1
0 ;
A S DA=$O(^PS(55,DA(1),5,DA)) I DA'>0 S DA=0 G END
1 ;
 S DIKZ(0)=$G(^PS(55,DA(1),5,DA,0))
 S X=$P($G(DIKZ(0)),U,1)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(1))#2 KILL^PSGAL5:PSGAL(1)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,1)
 I X'="" S ^PS(55,DA(1),5,"B",$E(X,1,30),DA)=""
 S X=$P($G(DIKZ(0)),U,1)
 I X'="" I '$D(DIU(0)) S ^PS(55,"AUE",DA(1),DA)=""
 S X=$P($G(DIKZ(0)),U,18)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(55)) KILL^PSGAL5:PSGAL(55)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,15)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(2))#2 KILL^PSGAL5:PSGAL(2)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,2)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(3))#2 KILL^PSGAL5:PSGAL(3)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,2)
 I X'="" I $S('$D(^PS(55,DA(1),5.1)):1,1:$P(^(5.1),"^",2)'=X) S $P(^(5.1),"^",2)=X
 S X=$P($G(DIKZ(0)),U,3)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(4))#2 KILL^PSGAL5:PSGAL(4)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,4)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(5))#2 KILL^PSGAL5:PSGAL(5)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,5)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(6))#2 KILL^PSGAL5:PSGAL(6)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,5)
 I X'="" D
 .N DIK,DIV,DIU,DIN
 .I 'X S DIU=$S($D(^PS(55,DA(1),5,DA,0)):$P(^(0),"^",6),1:"") I DIU S $P(^(0),"^",6)="" I $O(^DD(55.06,6,1,0)) K DIV S (DIV(0),D0)=DA(1),(DIV(1),D1)=DA,DIV="",DIH=55.06,DIG=6 D ^DICR
 S DIKZ(0)=$G(^PS(55,DA(1),5,DA,0))
 S X=$P($G(DIKZ(0)),U,6)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(7))#2 KILL^PSGAL5:PSGAL(7)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,7)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(8))#2 KILL^PSGAL5:PSGAL(8)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,7)
 I X'="" I $D(^PS(55,DA(1),5,DA,2)),$P(^(2),"^",4) S ^PS(55,DA(1),5,"AU",X,+$P(^(2),"^",4),DA)=""
 S DIKZ(6)=$G(^PS(55,DA(1),5,DA,6))
 S X=$P($G(DIKZ(6)),U,1)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(9))#2 KILL^PSGAL5:PSGAL(9)=X K PSGAL
 S DIKZ(2)=$G(^PS(55,DA(1),5,DA,2))
 S X=$P($G(DIKZ(2)),U,2)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(41))#2 KILL^PSGAL5:PSGAL(41)=X K PSGAL
 S X=$P($G(DIKZ(2)),U,2)
 I X'="" S ^PS(55,"AUDS",$E(X,1,30),DA(1),DA)=""
 S X=$P($G(DIKZ(0)),U,10)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(11))#2 KILL^PSGAL5:PSGAL(11)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,11)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(12))#2 KILL^PSGAL5:PSGAL(12)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,12)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(13))#2 KILL^PSGAL5:PSGAL(13)=X K PSGAL
 S DIKZ(5)=$G(^PS(55,DA(1),5,DA,5))
 S X=$P($G(DIKZ(5)),U,6)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(14))#2 KILL^PSGAL5:PSGAL(14)=X K PSGAL
 S X=$P($G(DIKZ(5)),U,6)
 I X'="" ; I X S PSGAMSF=0 D ^PSGAMSA
 S X=$P($G(DIKZ(5)),U,6)
 I X'="" D
 .N DIK,DIV,DIU,DIN
 .I X S DIU=$S($D(^PS(55,DA(1),5,DA,5)):$P(^(5),"^",9),1:0) S $P(^(5),"^",9)=DIU+X I $O(^DD(55.06,63,1,0)) K DIV S (DIV(0),D0)=DA(1),(DIV(1),D1)=DA,DIV=DIU+X,DIH=55.06,DIG=63 D ^DICR
 S DIKZ(4)=$G(^PS(55,DA(1),5,DA,4))
 S X=$P($G(DIKZ(4)),U,1)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(15))#2 KILL^PSGAL5:PSGAL(15)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,1)
 I X'="" X:'$D(PSGNVF) "S PSGAL(""C"")=""VN"" D ^PSGAL5" K PSGNVF,PSGAL
 S X=$P($G(DIKZ(4)),U,2)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(16))#2 KILL^PSGAL5:PSGAL(16)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,3)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(17))#2 KILL^PSGAL5:PSGAL(17)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,3)
 I X'="" X:'$D(PSGNVF) "S PSGAL(""C"")=""VP"" D ^PSGAL5" K PSGNVF,PSGAL
 S X=$P($G(DIKZ(4)),U,4)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(18))#2 KILL^PSGAL5:PSGAL(18)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,5)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(19))#2 KILL^PSGAL5:PSGAL(19)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,6)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(20))#2 KILL^PSGAL5:PSGAL(20)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,7)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(21))#2 KILL^PSGAL5:PSGAL(21)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,8)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(22))#2 KILL^PSGAL5:PSGAL(22)=X K PSGAL
 S DIKZ(0)=$G(^PS(55,DA(1),5,DA,0))
 S X=$P($G(DIKZ(0)),U,17)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(23))#2 KILL^PSGAL5:PSGAL(23)=X K PSGAL
 S DIKZ(2)=$G(^PS(55,DA(1),5,DA,2))
 S X=$P($G(DIKZ(2)),U,3)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(24))#2 KILL^PSGAL5:PSGAL(24)=X K PSGAL
 S X=$P($G(DIKZ(2)),U,1)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(43))#2 KILL^PSGAL5:PSGAL(43)=X K PSGAL
 S X=$P($G(DIKZ(2)),U,1)
 I X'="" D
 .N DIK,DIV,DIU,DIN
 .I '$D(DIU(0)),$D(PSGS0Y) S DIU=$S($D(^PS(55,DA(1),5,DA,2)):$P(^(2),"^",5),1:"") I DIU'=PSGS0Y S $P(^(2),"^",5)=PSGS0Y I $O(^DD(55.06,41,1,0)) K DIV S (DIV(0),D0)=DA(1),(DIV(1),D1)=DA,DIV=PSGS0Y,DIH=55.06,DIG=41 D ^DICR
 S X=$P($G(DIKZ(2)),U,1)
 I X'="" D
 .N DIK,DIV,DIU,DIN
 .I $D(PSGS0XT) S DIU=$S($D(^PS(55,DA(1),5,DA,2)):$P(^(2),"^",6),1:"") I DIU'=PSGS0XT S $P(^(2),"^",6)=PSGS0XT I $O(^DD(55.06,42,1,0)) K DIV S (DIV(0),D0)=DA(1),(DIV(1),D1)=DA,DIV=PSGS0XT,DIH=55.06,DIG=42 D ^DICR
 S DIKZ(0)=$G(^PS(55,DA(1),5,DA,0))
 S X=$P($G(DIKZ(0)),U,14)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(26))#2 KILL^PSGAL5:PSGAL(26)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,16)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(27))#2 KILL^PSGAL5:PSGAL(27)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,9)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(28))#2 KILL^PSGAL5:PSGAL(28)=X K PSGAL
 S DIKZ(5)=$G(^PS(55,DA(1),5,DA,5))
 S X=$P($G(DIKZ(5)),U,2)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(51))#2 KILL^PSGAL5:PSGAL(51)=X K PSGAL
 S DIKZ(2)=$G(^PS(55,DA(1),5,DA,2))
 S X=$P($G(DIKZ(2)),U,4)
 I X'="" S ^PS(55,DA(1),5,"AUS",+X,DA)="" I $P($G(^PS(55,DA(1),5,DA,0)),"^",7)]"" S ^PS(55,DA(1),5,"AU",$P(^(0),"^",7),+X,DA)=""
 S X=$P($G(DIKZ(2)),U,4)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(53))#2 KILL^PSGAL5:PSGAL(53)=X K PSGAL
 S X=$P($G(DIKZ(2)),U,4)
 I X'="" S ^PS(55,"AUD",$E(X,1,30),DA(1),DA)=""
 S X=$P($G(DIKZ(5)),U,4)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(61))#2 KILL^PSGAL5:PSGAL(61)=X K PSGAL
 S X=$P($G(DIKZ(5)),U,3)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(54))#2 KILL^PSGAL5:PSGAL(54)=X K PSGAL
 S X=$P($G(DIKZ(5)),U,5)
 I X'="" D
 .N DIK,DIV,DIU,DIN
 .I X S DIU=$S($D(^PS(55,DA(1),5,DA,5)):$P(^(5),"^",4),1:""),$P(^(5),"^",4)=DIU+X I $O(^DD(55.06,35,1,0)) K DIV S (DIV(0),D0)=DA(1),(DIV(1),D1)=DA,DIV=DIU+X,DIH=55.06,DIG=35 D ^DICR
 S X=$P($G(DIKZ(5)),U,5)
 I X'="" ; I X S PSGAMSF=2 D ^PSGAMSA
 S DIKZ(2)=$G(^PS(55,DA(1),5,DA,2))
 S X=$P($G(DIKZ(2)),U,5)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(56))#2 KILL^PSGAL5:PSGAL(56)=X K PSGAL
 S X=$P($G(DIKZ(2)),U,5)
 I X'="" I $P($G(^PS(55,DA(1),5,DA,2)),"^")["@" S $P(^(2),"^")=$P($P(^(2),"^"),"@")_"@"_X
 S X=$P($G(DIKZ(2)),U,6)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(57))#2 KILL^PSGAL5:PSGAL(57)=X K PSGAL
 S DIKZ(4)=$G(^PS(55,DA(1),5,DA,4))
 S X=$P($G(DIKZ(4)),U,15)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(58)) KILL^PSGAL5:PSGAL(58)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,16)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(59))#2 KILL^PSGAL5:PSGAL(59)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,17)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(60))#2 KILL^PSGAL5:PSGAL(60)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,12)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(63)) KILL^PSGAL5:PSGAL(63)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,13)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(64)) KILL^PSGAL5:PSGAL(64)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,14)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(65)) KILL^PSGAL5:PSGAL(65)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,11)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(62))#2 KILL^PSGAL5:PSGAL(62)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,9)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(66)) KILL^PSGAL5:PSGAL(66)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,9)
 I X'="" K:X ^PS(55,"APV",DA(1),DA) S:'X ^PS(55,"APV",DA(1),DA)=""
 S X=$P($G(DIKZ(4)),U,10)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(67)) KILL^PSGAL5:PSGAL(67)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,10)
 I X'="" K:X ^PS(55,"ANV",DA(1),DA) S:'X ^PS(55,"APV",DA(1),DA)=""
 S DIKZ(7)=$G(^PS(55,DA(1),5,DA,7))
 S X=$P($G(DIKZ(7)),U,1)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(68)) KILL^PSGAL5:PSGAL(68)=X K PSGAL
 S X=$P($G(DIKZ(7)),U,2)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(69)) KILL^PSGAL5:PSGAL(69)=X K PSGAL
 S DIKZ(5)=$G(^PS(55,DA(1),5,DA,5))
 S X=$P($G(DIKZ(5)),U,7)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(70)) KILL^PSGAL5:PSGAL(70)=X K PSGAL
 S X=$P($G(DIKZ(5)),U,8)
 I X'="" D
 .N DIK,DIV,DIU,DIN
 .I X S DIU=$S($D(^PS(55,DA(1),5,DA,5)):$P(^(5),"^",7),1:""),$P(^(5),"^",7)=DIU+X I $O(^DD(55.06,54,1,0)) K DIV S (DIV(0),D0)=DA(1),(DIV(1),D1)=DA,DIV=DIU+X,DIH=55.06,DIG=54 D ^DICR
 S X=$P($G(DIKZ(5)),U,8)
 I X'="" ; I '$D(DIU(0)),X S PSGAMSF=0 D ^PSGAMSA
 S DIKZ(4)=$G(^PS(55,DA(1),5,DA,4))
 S X=$P($G(DIKZ(4)),U,18)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(71)) KILL^PSGAL5:PSGAL(71)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,19)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(72)) KILL^PSGAL5:PSGAL(72)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,20)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(73)) KILL^PSGAL5:PSGAL(73)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,21)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(74)) KILL^PSGAL5:PSGAL(74)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,22)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(75)) KILL^PSGAL5:PSGAL(75)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,23)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(76)) KILL^PSGAL5:PSGAL(76)=X K PSGAL
 S X=$P($G(DIKZ(4)),U,24)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(77)) KILL^PSGAL5:PSGAL(77)=X K PSGAL
 S DIKZ(0)=$G(^PS(55,DA(1),5,DA,0))
 S X=$P($G(DIKZ(0)),U,20)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(79)) KILL^PSGAL5:PSGAL(79)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,20)
 I X'="" S ^PS(55,"AUDDD",$E(X,1,30),DA(1),DA)=""
 S DIKZ(6.5)=$G(^PS(55,DA(1),5,DA,6.5))
 S X=$P($G(DIKZ(6.5)),U,1)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(78)) KILL^PSGAL5:PSGAL(78)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,21)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(80)) KILL^PSGAL5:PSGAL(80)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,21)
 I X'="" D STOREINT^PSGSICH1
 S DIKZ(.1)=$G(^PS(55,DA(1),5,DA,.1))
 S X=$P($G(DIKZ(.1)),U,1)
 I X'="" S ^PS(55,DA(1),5,"C",$E(X,1,30),DA)=""
 S X=$P($G(DIKZ(.1)),U,1)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(101)) KILL^PSGAL5:PSGAL(101)=X K PSGAL
 S X=$P($G(DIKZ(.1)),U,2)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(102)) KILL^PSGAL5:PSGAL(102)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,24)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(103)) KILL^PSGAL5:PSGAL(103)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,25)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(104)) KILL^PSGAL5:PSGAL(104)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,26)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(105)) KILL^PSGAL5:PSGAL(105)=X K PSGAL
 S X=$P($G(DIKZ(.1)),U,3)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(106)) KILL^PSGAL5:PSGAL(106)=X K PSGAL
 S X=$P($G(DIKZ(0)),U,27)
 I X'="" I '$D(DIU(0)) D:$D(PSGAL(107)) KILL^PSGAL5:PSGAL(107)=X K PSGAL
CR1 S DIXR=414
 K X
 S DIKZ(.2)=$G(^PS(55,DA(1),5,DA,.2))
 S X(1)=$P(DIKZ(.2),U,8)
 S X(2)=$P(DIKZ(0),U,21)
 S X=$G(X(1))
 I $G(X(1))]"",$G(X(2))]"" D
 . K X1,X2 M X1=X,X2=X
 . N DIKXARR M DIKXARR=X S DIKCOND=1
 . S X=1
 . S DIKCOND=$G(X) K X M X=DIKXARR
 . Q:'DIKCOND
 . S ^PS(55,"ACX",$E(X(1),1,30),$E(X(2),1,30),DA_"U")=""
CR2 S DIXR=465
 K X
 S DIKZ(2)=$G(^PS(55,DA(1),5,DA,2))
 S X(1)=$P(DIKZ(2),U,2)
 S X(2)=$P(DIKZ(2),U,4)
 S X=$G(X(1))
 I $G(X(1))]"",$G(X(2))]"" D
 . K X1,X2 M X1=X,X2=X
 . N DIKXARR M DIKXARR=X S DIKCOND=1
 . S X=$$PATCH^XPDUTL("PXRM*1.5*12")
 . S DIKCOND=$G(X) K X M X=DIKXARR
 . Q:'DIKCOND
 . D SPSPA^PSJXRFS(.X,.DA,"UD")
CR3 S DIXR=499
 K X
 S DIKZ(2)=$G(^PS(55,DA(1),5,DA,2))
 S X(1)=$P(DIKZ(2),U,4)
 S DIKZ(8)=$G(^PS(55,DA(1),5,DA,8))
 S X(2)=$P(DIKZ(8),U,1)
 S X=$G(X(1))
 I $G(X(1))]"",$G(X(2))]"" D
 . K X1,X2 M X1=X,X2=X
 . S ^PS(55,"AUDC",$E(X(1),1,20),$E(X(2),1,20),DA(1),DA)=""
CR4 S DIXR=501
 K X
 S DIKZ(2)=$G(^PS(55,DA(1),5,DA,2))
 S X(1)=$P(DIKZ(2),U,4)
 S DIKZ(8)=$G(^PS(55,DA(1),5,DA,8))
 S X(2)=$P(DIKZ(8),U,1)
 S X=$G(X(1))
 I $G(X(1))]"",$G(X(2))]"" D
 . K X1,X2 M X1=X,X2=X
 . S ^PS(55,DA(1),5,"AUN",X(1),X(2),DA)=""
CR5 K X
 G:'$D(DIKLM) A Q:$D(DISET)
END G ^PSSJXR25
