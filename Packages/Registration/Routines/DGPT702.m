DGPT702 ;ALB/MTC,HIOFO/FT - Process 702 transmission ;4/14/2014 4:08pm
 ;;5.3;Registration;**884**;Aug 13, 1993;Build 31
 ;
 ;no external references
 ;
EN ;called from DGPTAE
 S DGPTSTR=^TMP("AEDIT",$J,NODE,SEQ)
 D:DGPTFMT=2 SET9
 D:DGPTFMT=3 SET10
DIAG ;
 S DGPTERC=0 D ^DGPT70DI
 I 'DGPTERC W "."
 ;
EXIT ;
 K DGPTGD2,DGPTGD3,DGPTGD4,DGPTGD5,DGPTGD6,DGPTGD7,DGPTGD8,DGPTGD9,DGPTGD10,DGPTGD11,DGPTGD12,DGPTGD13,DGPTGD14,DGPTGD15,DGPTGD16,DGPTGD17
 K DGPTGD18,DGPTGD19,DGPTGD20,DGPTGD21,DGPTGD22,DGPTGD23,DGPTGD24,DGPTGD25,DGPTPOA2,DGPTPOA3,DGPTPOA4,DGPTPOA5,DGPTPOA6,DGPTPOA7
 K DGPTPOA8,DGPTPOA9,DGPTPOA10,DGPTPOA11,DGPTPOA12,DGPTPOA13,DGPTPOA14,DGPTPOA15,DGPTPOA16,DGPTPOA17,DGPTPOA18,DGPTPOA19,DGPTPOA20,DGPTPOA21,DGPTPOA22
 K DGPTPOA23,DGPTPOA24,DGPTPOA25,DGPTGD,DGPTSTR
 Q
SET9 ;record layout before icd10 turned on
 S DGPTGD1=$E(DGPTSTR,41,47) ;diagnostic codes 1 - 9, but why 1 when 1 is not in the 702 segment?
 S DGPTGD2=$E(DGPTSTR,48,54) ;the values are checked in DGPT70DI and reset using indirection into the
 S DGPTGD3=$E(DGPTSTR,55,61) ;variable name. also, the DGPTDIAR array(date)=procedure ien is set.
 S DGPTGD4=$E(DGPTSTR,62,68)
 S DGPTGD5=$E(DGPTSTR,69,75)
 S DGPTGD6=$E(DGPTSTR,76,82)
 S DGPTGD7=$E(DGPTSTR,83,89)
 S DGPTGD8=$E(DGPTSTR,90,96)
 S DGPTGD9=$E(DGPTSTR,97,103)
 Q
SET10 ;record layout after icd10 turned on
 S DGPTDOD=$E(DGPTSTR,31,36) ;date of discharge
 S DGPTTOD=$E(DGPTSTR,37,40) ;time of discharge(24 hour time)
 S DGPTGD2=$E(DGPTSTR,41,47),DGPTPOA2=$E(DGPTSTR,48) ;parse out the 24 secondary dx & poa codes
 S DGPTGD3=$E(DGPTSTR,49,55),DGPTPOA3=$E(DGPTSTR,56)
 S DGPTGD4=$E(DGPTSTR,57,63),DGPTPOA4=$E(DGPTSTR,64)
 S DGPTGD5=$E(DGPTSTR,65,71),DGPTPOA5=$E(DGPTSTR,72)
 S DGPTGD6=$E(DGPTSTR,73,79),DGPTPOA6=$E(DGPTSTR,80)
 S DGPTGD7=$E(DGPTSTR,81,87),DGPTPOA7=$E(DGPTSTR,88)
 S DGPTGD8=$E(DGPTSTR,89,95),DGPTPOA8=$E(DGPTSTR,96)
 S DGPTGD9=$E(DGPTSTR,97,103),DGPTPOA9=$E(DGPTSTR,104)
 S DGPTGD10=$E(DGPTSTR,105,111),DGPTPOA10=$E(DGPTSTR,112)
 S DGPTGD11=$E(DGPTSTR,113,119),DGPTPOA11=$E(DGPTSTR,120)
 S DGPTGD12=$E(DGPTSTR,121,127),DGPTPOA12=$E(DGPTSTR,128)
 S DGPTGD13=$E(DGPTSTR,129,135),DGPTPOA13=$E(DGPTSTR,136)
 S DGPTGD14=$E(DGPTSTR,137,143),DGPTPOA14=$E(DGPTSTR,144)
 S DGPTGD15=$E(DGPTSTR,145,151),DGPTPOA15=$E(DGPTSTR,152)
 S DGPTGD16=$E(DGPTSTR,153,159),DGPTPOA16=$E(DGPTSTR,160)
 S DGPTGD17=$E(DGPTSTR,161,167),DGPTPOA17=$E(DGPTSTR,168)
 S DGPTGD18=$E(DGPTSTR,169,175),DGPTPOA18=$E(DGPTSTR,176)
 S DGPTGD19=$E(DGPTSTR,177,183),DGPTPOA19=$E(DGPTSTR,184)
 S DGPTGD20=$E(DGPTSTR,185,191),DGPTPOA20=$E(DGPTSTR,192)
 S DGPTGD21=$E(DGPTSTR,193,199),DGPTPOA21=$E(DGPTSTR,200)
 S DGPTGD22=$E(DGPTSTR,201,207),DGPTPOA22=$E(DGPTSTR,208)
 S DGPTGD23=$E(DGPTSTR,209,215),DGPTPOA23=$E(DGPTSTR,216)
 S DGPTGD24=$E(DGPTSTR,217,223),DGPTPOA24=$E(DGPTSTR,224)
 S DGPTGD25=$E(DGPTSTR,225,231),DGPTPOA25=$E(DGPTSTR,232)
 Q
