PSOREJP6 ;AITC/CKB - Third Party Reject Additional Reject Information (ARI) Screen ;04/28/2020
 ;;7.0;OUTPATIENT PHARMACY;**560**;DEC 1997;Build 22
 ;
BPSRESP(DURIEN) ;
 ;Input Variables:
 ; DURIEN - Claim Response IEN. Pointer to the BPS RESPONSES File #9002313.03
 ;
 I '$G(DURIEN) Q
 N BPSDT,FLD,FLDNUM
 ;
 ; The fields in FLDNUM were added as part of the NCPDP January 2020 updates. Display only populated fields.
 ; Get fields and set into FLD array
 D SETLN^PSOREJP5()
 ;
 S FLDNUM="2387;2389;2393;2394;2395;2397;2398;2399;2401;2402;2403;2404;2405;2406;2407;2408;2409"
 D GETS^DIQ(9002313.0301,"1,"_DURIEN_",",FLDNUM,"IE","FLD","ERROR")
 I $G(FLD(9002313.0301,"1,"_DURIEN_",",2387,"E"))'="" D
 . D SET^PSOREJP5("INVALID PROVIDER DATA SOURCE",80-$L($$LABEL^PSOREJP5("INVALID PROVIDER DATA SOURCE")),"",FLD(9002313.0301,"1,"_DURIEN_",",2387,"E"))
 S BPSDT=$G(FLD(9002313.0301,"1,"_DURIEN_",",2389,"I"))
 I BPSDT'="" D
 . S BPSDT=$E(BPSDT,5,6)_"/"_$E(BPSDT,7,8)_"/"_$E(BPSDT,1,4)
 . D SET^PSOREJP5("FORMULARY ALTERNATIVE EFF DATE",80-$L($$LABEL^PSOREJP5("FORMULARY ALTERNATIVE EFF DATE")),"",BPSDT)
 I $G(FLD(9002313.0301,"1,"_DURIEN_",",2393,"E"))'="" D
 . D SET^PSOREJP5("DUR/DUE CO-AGENT DESCRIPTION",80-$L($$LABEL^PSOREJP5("DUR/DUE CO-AGENT DESCRIPTION")),"",FLD(9002313.0301,"1,"_DURIEN_",",2393,"E"))
 I $G(FLD(9002313.0301,"1,"_DURIEN_",",2394,"I"))'="" D
 . D SET^PSOREJP5("UNIT OF PRIOR DISPENSED QTY",80-$L($$LABEL^PSOREJP5("UNIT OF PRIOR DISPENSED QTY")),"",FLD(9002313.0301,"1,"_DURIEN_",",2394,"I"))
 I $G(FLD(9002313.0301,"1,"_DURIEN_",",2395,"E"))'="" D
 . D SET^PSOREJP5("OTHER PHARMACY ID QUALIFIER",80-$L($$LABEL^PSOREJP5("OTHER PHARMACY ID QUALIFIER")),"",FLD(9002313.0301,"1,"_DURIEN_",",2395,"E"))
 I $G(FLD(9002313.0301,"1,"_DURIEN_",",2397,"E"))'="" D
 . D SET^PSOREJP5("OTHER PHARMACY NAME",80-$L($$LABEL^PSOREJP5("OTHER PHARMACY NAME")),"",FLD(9002313.0301,"1,"_DURIEN_",",2397,"E"))
 I $G(FLD(9002313.0301,"1,"_DURIEN_",",2398,"E"))'="" D
 . D SET^PSOREJP5("OTHER PHARMACY TELEPHONE",80-$L($$LABEL^PSOREJP5("OTHER PHARMACY TELEHONE")),"",FLD(9002313.0301,"1,"_DURIEN_",",2398,"E"))
 I $G(FLD(9002313.0301,"1,"_DURIEN_",",2399,"E"))'="" D
 . D SET^PSOREJP5("OTHER PRESCRIBER LAST NAME",80-$L($$LABEL^PSOREJP5("OTHER PRESCRIBER LAST NAME")),"",FLD(9002313.0301,"1,"_DURIEN_",",2399,"E"))
 I $G(FLD(9002313.0301,"1,"_DURIEN_",",2401,"E"))'="" D
 . D SET^PSOREJP5("OTHER PRESCRIBER ID QUALIFIER",80-$L($$LABEL^PSOREJP5("OTHER PRESCRIBER ID QUALIFIER")),"",FLD(9002313.0301,"1,"_DURIEN_",",2401,"E"))
 I $G(FLD(9002313.0301,"1,"_DURIEN_",",2402,"E"))'="" D
 . D SET^PSOREJP5("OTHER PRESCRIBER ID",80-$L($$LABEL^PSOREJP5("OTHER PRESCRIBER ID")),"",FLD(9002313.0301,"1,"_DURIEN_",",2402,"E"))
 I $G(FLD(9002313.0301,"1,"_DURIEN_",",2403,"E"))'="" D
 . D SET^PSOREJP5("OTHER PRESCRIBER PHONE NUMBER",80-$L($$LABEL^PSOREJP5("OTHER PRESCRIBER PHONE NUMBER")),"",FLD(9002313.0301,"1,"_DURIEN_",",2403,"E"))
 I $G(FLD(9002313.0301,"1,"_DURIEN_",",2404,"E"))'="" D
 . D SET^PSOREJP5("DUR/DUE COMPOUND PRODUCT ID",80-$L($$LABEL^PSOREJP5("DUR/DUE COMPOUND PRODUCT ID")),"",FLD(9002313.0301,"1,"_DURIEN_",",2404,"E"))
 I $G(FLD(9002313.0301,"1,"_DURIEN_",",2405,"E"))'="" D
 . D SET^PSOREJP5("DUR/DUE CMPND PRDUCT ID QUALIF",80-$L($$LABEL^PSOREJP5("DUR/DUE CMPND PRDUCT ID QUALIF")),"",FLD(9002313.0301,"1,"_DURIEN_",",2405,"E"))
 I $G(FLD(9002313.0301,"1,"_DURIEN_",",2406,"E"))'="" D
 . D SET^PSOREJP5("DUR/DUE MAXIMUM DAILY DOSE QTY",80-$L($$LABEL^PSOREJP5("DUR/DUE MAXIMUM DAILY DOSE QTY")),"",FLD(9002313.0301,"1,"_DURIEN_",",2406,"E"))
 I $G(FLD(9002313.0301,"1,"_DURIEN_",",2407,"I"))'="" D
 . D SET^PSOREJP5("DUR/DUE MAX DAILY DOSE - UNIT",80-$L($$LABEL^PSOREJP5("DUR/DUE MAX DAILY DOSE - UNIT")),"",FLD(9002313.0301,"1,"_DURIEN_",",2407,"I"))
 I $G(FLD(9002313.0301,"1,"_DURIEN_",",2408,"E"))'="" D
 . D SET^PSOREJP5("DUR/DUE MINIMUM DAILY DOSE QTY",80-$L($$LABEL^PSOREJP5("DUR/DUE MINIMUM DAILY DOSE QTY")),"",FLD(9002313.0301,"1,"_DURIEN_",",2408,"E"))
 I $G(FLD(9002313.0301,"1,"_DURIEN_",",2409,"I"))'="" D
 . D SET^PSOREJP5("DUR/DUE MIN DAILY DOSE - UNIT",80-$L($$LABEL^PSOREJP5("DUR/DUE MIN DAILY DOSE - UNIT")),"",FLD(9002313.0301,"1,"_DURIEN_",",2409,"I"))
 ;
 Q
