YSXRAC8 ; COMPILED XREF FOR FILE #601.2213 ; 12/28/04
 ; 
 S DA(3)=DA(2) S DA(2)=0 S DA(1)=0 S DA=0
A1 ;
 I $D(DISET) K DIKLM S:DIKM1=3 DIKLM=1 S:DIKM1'=3&'$G(DIKPUSH(3)) DIKPUSH(3)=1,DA(3)=DA(2),DA(2)=DA(1),DA(1)=DA,DA=0 S:DIKM1<2 DA(1)=0 G @DIKM1
A S DA(2)=$O(^YTD(601.2,DA(3),1,DA(2))) I DA(2)'>0 S DA(2)=0 G END
1 ;
B S DA(1)=$O(^YTD(601.2,DA(3),1,DA(2),1,DA(1))) I DA(1)'>0 S DA(1)=0 Q:DIKM1=1  G A
2 ;
C S DA=$O(^YTD(601.2,DA(3),1,DA(2),1,DA(1),"R",DA)) I DA'>0 S DA=0 Q:DIKM1=2  G B
3 ;
 S DIKZ(0)=$G(^YTD(601.2,DA(3),1,DA(2),1,DA(1),"R",DA,0))
 S X=$P(DIKZ(0),U,2)
 I X'="" S ^YTD(601.2,DA(3),1,DA(2),1,DA(1),"R","AD",$E(X,1,30),DA)=""
 G:'$D(DIKLM) C Q:$D(DISET)
END Q
